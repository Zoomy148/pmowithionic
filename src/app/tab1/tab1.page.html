<ion-header [translucent]="true" *ngIf="desktop">
  <ion-toolbar color = "primary">
    <ion-avatar slot="start">
      <ion-img src="/assets/icon/logo.png"></ion-img>
    </ion-avatar>
    <ion-buttons slot="start" >
      <ion-button [routerLink]="['/tabs/tab1']">Сотрудники</ion-button>
      <ion-button [routerLink]="['/tabs/tab3']">Вакансии</ion-button>
      <ion-button [routerLink]="['/tabs/tab4']">Проекты</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-header [translucent]="true" *ngIf="mobile">
  <ion-toolbar color = "primary">
    <ion-title>
      Сотрудники по отделам
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content *ngIf="mobile">
  <ion-grid>
    <ion-row>
      <ion-col size-md = "6" offset-md = "3">
        <ion-searchbar [(ngModel)] = "searchStr"></ion-searchbar>
        <ion-card>
          <ion-list>
           <ion-card-header>Сотрудники</ion-card-header>
            <ion-card-content>
              <ion-item *ngFor = "let user of userTable | search: searchStr">
                <ion-avatar slot = "start">
                  <ion-img [src] = "user.img"></ion-img>
                </ion-avatar>
                <ion-label>
                  {{user.name}}
                  <p>{{user.position}} ({{user.group}})</p>
                </ion-label> 
                <ion-button [routerLink] = "['/tabs/tab1/users', user.id ]" [routerAnimation]="" ><ion-icon name="arrow-forward-outline"></ion-icon></ion-button>
              </ion-item>
            </ion-card-content>
          </ion-list>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<ion-content *ngIf="desktop">
  <ion-grid>
    <ion-row>
      <ion-col size-md = "12" offset-md = "  ">
        <ion-searchbar [(ngModel)] = "searchStr"></ion-searchbar>
        <ion-card>
          <ion-list>
            <ion-card-header>Сотрудники</ion-card-header>
            <ion-card-content>
              <mat-accordion >
                <mat-expansion-panel hideToggle *ngFor = "let user of userTable | search: searchStr ;let i = index " >
                  <mat-expansion-panel-header >
                    <mat-panel-description>
              <ion-item >
                <ion-avatar slot = "start">
                  <ion-img [src] = "user.img"></ion-img>
                </ion-avatar>
                <ion-label>
                  {{user.name}}
                  <p>Группа:{{user.group}} Должность:  {{user.position}}</p>
                </ion-label>
                <ion-col>Контактное лицо:
                  <p> {{user.leader}}</p>
                </ion-col>
                <ion-col >Учавствует в проектах :
                  <p > {{user.activity[0].project[i].projectname}}</p>
                </ion-col>
                <ion-button [routerLink] = "['users', user.id ]" [routerAnimation]="" ><ion-icon name="arrow-forward-outline"></ion-icon></ion-button>
              </ion-item>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <ion-card >
                    <ion-item>
                      <ion-label style="font-size: 20px;">Компетенции и сертификаты
                      </ion-label>
                    </ion-item>
                    <ion-card-content>
                      <ion-chip outline color="primary" *ngFor = "let experience of user.experience; index as num">
                        <ion-label>{{experience}}</ion-label>
                      </ion-chip>
                      <ion-card *ngFor="let row of user.activity;let i = index">
                        <mat-accordion>
                          <mat-expansion-panel hideToggle>
                            <mat-expansion-panel-header style="height: 100px;">
                              <mat-panel-title>
                                <ion-card-header>
                                  <ion-card-title>
                                    {{row.month}}
                                  </ion-card-title>
                                </ion-card-header>
                              </mat-panel-title>
                            </mat-expansion-panel-header>
                            <ion-card-content>
                              <ion-row>
                                <ion-col size-md = "3">
                                  Project name
                                </ion-col>
                                <ion-col size-md = "3">
                                  Project part
                                </ion-col>
                              </ion-row>
                              <ion-row *ngFor = "let project of row.project">
                                <ion-col size-md = "3" style="text-align: center;">
                                  {{project.projectname}}
                                </ion-col>
                                <ion-col size-md = "3" style="text-align: center;">
                                  {{project.busy}} %
                                </ion-col>
                              </ion-row>
                              <ion-row>
                                <ion-col size-md = "12">
                                  <canvas baseChart
                                          [datasets] = "barChartData"
                                          [labels] = "barChartLabels[i]"
                                          [legend] = "barChartLegend"
                                          [options]="barChartOptions"
                                          [chartType] = "barChartType">
                                  </canvas>
                                </ion-col>
                              </ion-row>
                            </ion-card-content>
                          </mat-expansion-panel>
                        </mat-accordion>
                      </ion-card>
                    </ion-card-content>
                  </ion-card>
                </mat-expansion-panel>
              </mat-accordion>
            </ion-card-content>
          </ion-list>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>


